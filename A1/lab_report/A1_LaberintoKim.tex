\documentclass{article}

\usepackage{amsfonts}
\usepackage{amsmath}

\addtolength{\jot}{1em} %https://tex.stackexchange.com/questions/14679/amsmath-align-environment-row-spacing

\title{Optimization Assignment 1}
\date{2021-02-xx}
\author{Kim Paolo Laberinto}

\begin{document}
    \maketitle
    \newpage

    \section{Q6. (Graduate Student)}

    Let $f: \mathbb{R}^4 \rightarrow \mathbb{R}$ be defined as $f(x) = \| Ax - b \| + \lambda \| Cx \| + \gamma \| Eb \|$ where $A, C, E \in \mathbb{R}^{4 \times 4}$, $x,b \in \mathbb{R}^4$ and $\lambda,\gamma \in \mathbb{R}$.

    Let $D$ denote the differential operator.

    \begin{align*}
    Df(x) &= D \left( \| Ax - b \| + \lambda \| Cx \| + \gamma \| Eb \| \right) &\\
    &= D \left( \| Ax - b \| \right) +  \lambda D \left( \| Cx \| \right) +  \gamma D \left( \| Eb \| \right) & \parbox[c]{0.4\linewidth}{[using linearity of D]}\\
    &= D \left( \| Ax - b \| \right) +  \lambda D \left( \| Cx \| \right) +  0 &\\
    &= D \left( \| Ax - b \| \right) +  \lambda D \left( \| Cx \| \right) &\\
    &= \frac{ (Ax-b)^T A }{\| Ax-b \| } + \lambda \frac{(Cx)^T C}{ \| Cx \| } & \parbox[c]{0.4\linewidth}{[using derivations from next sections]}
    \end{align*}

    \subsection{ $D \left(\| Cx \| \right)$ }

    \begin{align*}
        D\left( \| Cx \| \right) &= D \left( \sqrt{(Cx)^T (Cx)} \right) \\
        &= D \left( \left( (Cx)^T (Cx) \right)^\frac{1}{2} \right) \\
        &= \frac{1}{2} \left( (Cx)^T (Cx) \right)^\frac{-1}{2} D \left( (Cx)^T (Cx) \right) & \parbox[c]{0.4\linewidth}{[using Chain Rule]}\\
        &= \frac{1}{2 \sqrt{ (Cx)^T (Cx) } }  D \left( (Cx)^T (Cx) \right) \\
        &= \frac{1}{2 \| Cx \| }  D \left( (Cx)^T (Cx) \right) \\
        &= \frac{\left( (Cx)^T D(Cx) \right) + \left( (Cx)^T D(Cx) \right) }{2 \| Cx \| } & \parbox[c]{0.4\linewidth}{[using Product Rule]}\\
        &= \frac{2 \left( (Cx)^T D(Cx) \right)}{2 \| Cx \| } \\
        &= \frac{(Cx)^T C}{ \| Cx \| }
    \end{align*}

    \subsection{ $D \left( \| Ax-b \| \right)$ }

    \begin{align*}
        D\left( \| Ax-b \| \right) &= D \left( \sqrt{(Ax-b)^T (Ax-b)} \right) \\
        &= D \left( \left( (Ax-b)^T (Ax-b) \right)^{\frac{1}{2}} \right) \\
        &= \frac{1}{2} \left((Ax-b)^T (Ax-b) \right)^{\frac{-1}{2}} D \left( (Ax-b)^T (Ax-b) \right) & \parbox[c]{0.4\linewidth}{[using Chain Rule]} \\
        &= \frac{1}{2 \sqrt { (Ax-b)^T (Ax-b) }} D \left( (Ax-b)^T (Ax-b) \right) \\
        &= \frac{1}{2 \| Ax-b \| } D \left( (Ax-b)^T (Ax-b) \right) \\
        &= \frac{ \left( (Ax-b)^T D(Ax-b) \right) + \left( (Ax-b)^T D(Ax-b) \right) }{2 \| Ax-b \| } & \parbox[c]{0.4\linewidth}{[using Product Rule]} \\
        &= \frac{ 2(Ax-b)^T D(Ax-b) }{2 \| Ax-b \| } \\
        &= \frac{ 2(Ax-b)^T A }{2 \| Ax-b \| } \\
        &= \frac{ (Ax-b)^T A }{\| Ax-b \| }
    \end{align*}

\end{document}